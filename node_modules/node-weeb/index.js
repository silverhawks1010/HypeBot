const fetch = require('node-fetch');

exports.anime = function(query) {
    return new Promise(function(resolve, reject) {
        fetch(`https://kitsu.io/api/edge/anime?filter[text]=${query}`)
        .then(res => resolve(res.text()))
        .catch(err => reject(Error(err)));
    });
};

exports.manga = function(query) {
    return new Promise(function(resolve, reject) {
        fetch(`https://kitsu.io/api/edge/manga?filter[text]=${query}`)
        .then(res => resolve(res.text()))
        .catch(err => reject(Error(err)));
    });
};

exports.random = function(query) {
    return new Promise(function(resolve, reject) {
        fetch(`https://weebs.cf/random/${query}`)
        .then(res => resolve(res.text()))
        .catch(err => reject(Error(err)));
    });
};

exports.nekoLife = function(query, type) {
    return new Promise(function(resolve, reject) {
        if (type == 'img')  {
            fetch(`https://nekos.life/api/v2/img/${query}`)
            .then(res => resolve(res.text()))
            .catch(err => reject(Error(err)));
        } else if (!type) {
            fetch(`https://nekos.life/api/v2/${query}`)
            .then(res => resolve(res.text()))
            .catch(err => reject(Error(err)));
        }
    });
};